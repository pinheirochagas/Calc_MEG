function [ output_args ] = smoothCalcVSA(subName, task)
% Smooth MEG data
% subName = 's01'
% task = 'calc' or 'VSA'

datadir = '/Users/pinheirochagas/Pedro/NeuroSpin/Experiments/Calc_MEG/data/mat/';

load([datadir subName '_' task '.mat'])

% Define windown to avarage
window = 10; % time points = 40 ms
avgwindows = 1:window:length(data.trial{1});

for trial = 1:length(data.trial)
    for chan = 1:length(data.trial{1})
        datatoAVG = data.trial{trial}(chan,:);
        for timewin = 1:length(avgwindows)-1
            dataAVGwin{timewin} = repmat(mean(datatoAVG(avgwindows(timewin): avgwindows(timewin+1))),window,1);            
        end
        dataAVG = vertcat(dataAVGwin{:})';
    end
end

hold on
plot(datatoAVG)
plot(dataAVG, 'LineWidth', 4)
plot(avgwindows, dataAVG(avgwindows(1:end)),'ro')


    
    data.ECGEOG
    data.trial
    
    data


end

